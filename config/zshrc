
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...
export SHELL=/usr/bin/zsh
export EDITOR=nvim
export VISUAL=nvim

autoload bashcompinit
bashcompinit

if [[ -s "~/.zshrc.d/yarn-completion.bash" ]]; then
  source "~/.zshrc.d/yarn-completion.bash"
fi

eval `dircolors ~/.zshrc.d/dircolors-solarized.ansi-light`

create_ssh_agent_link() {
  if [[ ! -a /tmp/ssh-agent ]]; then
    sudo ln -s $(dirname $SSH_AUTH_SOCK) /tmp/ssh-agent
  fi
}

alias create="\
create_ssh_agent_link
cd ~/projects/fleet-management/dev &&\
./create \
  -v ~/.zshrc:/home/dev/.zshrc.d/__host.zshrc \
  -v ~/projects/:/home/dev/projects \
  -v ~/.vimrc:/home/dev/.vimrc \
  -v ~/.vimrc:/home/dev/.config/nvim/init.vim \
  -v ~/.vim:/home/dev/.vim \
  -v ~/.zprezto:/home/dev/.zprezto \
  -v ~/.zlogin:/home/dev/.zlogin \
  -v ~/.zlogout:/home/dev/.zlogout \
  -v ~/.zpreztorc:/home/dev/.zpreztorc \
  -v ~/.zshenv:/home/dev/.zshenv \
  -e SSH_AUTH_SOCK=/ssh-agent \
  -v /ssh-agent:/ssh-agent \
&& cd -"
alias enter="create_ssh_agent_link && ~/projects/fleet-management/dev/enter zsh"

alias prepare_container="yarn global add flow-language-server && wget -o /tmp/elixir-ls.zip https://github.com/JakeBecker/elixir-ls/dowload/v0.2.19/elixir-ls.zip && unzip /tmp/elixir-ls.zip -d ~/.elixir-ls"

alias pbcopy='xclip -selection clipboard'
alias pbpaste='xclip -selection clipboard -o'
alias dl="cd ~/Downloads"

# Get week number
alias week='date +%V'

# Intuitive map function
# For example, to list all directories that contain a certain file:
# find . -name .gitattributes | map dirname
alias map="xargs -n1"

export PATH=$PATH:~/.bin:~/.yarn/bin

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
